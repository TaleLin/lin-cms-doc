<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>后端插件开发 | Lin CMS</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/lin-cms-doc/favicon.ico">
    <meta name="description" content="">
    <link rel="preload" href="/lin-cms-doc/assets/css/0.styles.5385530c.css" as="style"><link rel="preload" href="/lin-cms-doc/assets/js/app.0c2f698b.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/11.98c62765.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/2.ae8ff45b.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/44.0eeb345a.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/5.98054b77.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/7.e3bf37d0.js" as="script"><link rel="preload" href="/lin-cms-doc/assets/js/6.1e097248.js" as="script"><link rel="prefetch" href="/lin-cms-doc/assets/js/10.67ca26f0.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/100.248cdcdd.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/101.766c1084.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/102.c7e78226.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/103.d54a0b0a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/104.e99c9bec.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/105.da37d339.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/106.33921687.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/107.b53edc7e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/108.c34090e5.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/109.d801c9c6.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/110.4083c115.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/111.dec851f1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/112.176d4762.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/113.5528beab.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/114.7d306b5f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/115.2a1e3f07.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/116.ef1d28c2.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/117.ecf13784.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/118.ea054fc7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/119.e3010544.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/12.db08dcea.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/120.31e50f01.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/121.505ecae8.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/122.8ebd370f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/123.32dfcd5f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/124.34a5d8c1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/125.68442be5.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/126.72afa60b.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/127.96a0a1c7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/128.86e0a244.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/129.b63f56a3.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/13.6b9c26b3.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/130.67ee85eb.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/131.489f07b7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/132.3a7d88b4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/133.dd271d42.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/134.4a24c147.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/135.a8915d52.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/136.b4f5180c.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/137.9dc2d589.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/138.8d48e127.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/139.2819880e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/14.1f39a8db.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/140.56d45fa8.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/141.0268e5d4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/142.2339bd26.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/143.36fc2b77.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/144.eca25c14.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/145.9122b093.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/146.76007bd7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/147.4e2f18a1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/148.409e224f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/149.84072c40.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/15.d7046cc9.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/150.c4243c13.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/151.3cb65465.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/152.27d4cd58.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/153.09b0d701.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/154.70a9b510.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/155.32df1d56.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/156.4b86d22b.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/157.8ffa9180.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/158.88d1626b.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/159.cf5b22ea.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/16.6743e79c.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/160.b39d1bc2.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/161.c2f926c1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/162.790f84c0.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/163.05735410.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/164.a9146187.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/165.f7ddc289.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/166.b071bdca.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/167.e1ade20f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/168.291d1d7e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/169.c8b82cd7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/17.4691495d.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/170.6e809512.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/171.a9cbd38e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/172.c90f84ae.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/173.d447057a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/174.63aeb4d2.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/175.e69399b9.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/176.3da116d0.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/177.96da1e04.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/178.011fe360.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/179.e8ac9465.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/18.3113f393.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/180.61576eaf.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/181.d1bc0ff7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/182.009b2497.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/183.60a331a5.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/184.6e9d9430.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/185.18f73a42.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/186.03ff2ec2.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/187.5cacf727.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/188.924f7112.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/189.430c1a49.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/19.ca54f765.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/190.3758eb63.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/191.b2fba1ca.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/192.768e7900.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/193.b0b7054e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/194.6fd4300e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/195.8bc5437a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/196.50c800f7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/197.c793a7e0.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/198.7c0223ba.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/199.fe92b843.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/20.30a7b64a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/200.f41f85ec.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/201.7caff348.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/202.63048b94.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/21.8ab9e083.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/22.5e3706d9.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/23.dc49ff59.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/24.8d0fb589.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/25.83ab46a6.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/26.357c2ded.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/27.012ec3ab.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/28.501da67e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/29.5881c8f1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/3.ba25c589.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/30.1204706d.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/31.cd70aa87.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/32.74b1da77.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/33.ce0ec142.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/34.8a7cab03.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/35.80ad1408.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/36.a76b041c.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/37.2396fbe7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/38.4828c143.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/39.fc416323.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/4.a8033413.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/40.394cb709.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/41.a1b5ed76.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/42.1d232a78.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/43.8e9aeed4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/45.669f79f0.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/46.1fe1a7e7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/47.55d00bbd.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/48.efbeef92.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/49.073e0f90.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/50.9ac6adbe.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/51.8435eae6.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/52.d81f35e3.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/53.8987e2ce.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/54.22448529.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/55.592e5f5f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/56.b07a474b.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/57.9466a060.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/58.0d41863a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/59.412592c6.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/60.a0a4770e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/61.5530d376.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/62.0921ff2e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/63.86c68e40.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/64.47020c68.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/65.449e7a61.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/66.b231d73f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/67.74b3baf7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/68.98367fda.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/69.c261b60a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/70.d7adc366.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/71.f8a46297.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/72.c2dbf2d4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/73.56fb7d8a.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/74.3368bd22.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/75.9b07a3db.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/76.38f45be4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/77.fa3569ab.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/78.1773e97e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/79.9971d308.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/8.2679a8d4.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/80.e0189720.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/81.860d2d89.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/82.91f4df5f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/83.92da7cbb.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/84.3fe74db1.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/85.6478f112.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/86.6cba9bf7.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/87.d4440420.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/88.1f4c3e0e.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/89.9d12e43d.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/9.0f13958f.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/90.d7ab7d01.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/91.8f277940.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/92.4d649231.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/93.4625880c.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/94.86fef08b.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/95.fb2202ca.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/96.233fa5fb.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/97.df8c81e2.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/98.536005ce.js"><link rel="prefetch" href="/lin-cms-doc/assets/js/99.b49ab35f.js">
    <link rel="stylesheet" href="/lin-cms-doc/assets/css/0.styles.5385530c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lin-cms-doc/0.2.x/" class="home-link router-link-active"><img src="/lin-cms-doc/left-logo.png" alt="Lin CMS" class="logo"> <span class="site-name can-hide">Lin CMS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lin-cms-doc/0.2.x/" class="nav-link">
  介绍
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/imooc/" class="nav-link">
  慕课课程
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/start/" class="nav-link">
  入门
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/server/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/client/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/plugins/flask/" class="nav-link router-link-active">
  插件
</a></div><div class="nav-item"><a href="https://course.talelin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  专栏
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lin-cms-doc/plugins/flask/be_develop.html" class="nav-link">
  0.3.x
</a></li><li class="dropdown-item"><!----> <a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  0.2.x
</a></li></ul></div></div> <a href="https://github.com/TaleLin/lin-cms-vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lin-cms-doc/0.2.x/" class="nav-link">
  介绍
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/imooc/" class="nav-link">
  慕课课程
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/start/" class="nav-link">
  入门
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/server/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/client/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/lin-cms-doc/0.2.x/plugins/flask/" class="nav-link router-link-active">
  插件
</a></div><div class="nav-item"><a href="https://course.talelin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  专栏
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lin-cms-doc/plugins/flask/be_develop.html" class="nav-link">
  0.3.x
</a></li><li class="dropdown-item"><!----> <a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  0.2.x
</a></li></ul></div></div> <a href="https://github.com/TaleLin/lin-cms-vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>插件koa版</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>插件flask版</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/lin-cms-doc/plugins/flask/" class="sidebar-link">插件入门</a></li><li><a href="/lin-cms-doc/0.2.x/plugins/flask/start.html" class="sidebar-link">快速上手</a></li><li><a href="/lin-cms-doc/0.2.x/plugins/flask/fe_develop.html" class="sidebar-link">前端插件开发</a></li><li><a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html" aria-current="page" class="active sidebar-link">后端插件开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html#插件的规范" class="sidebar-link">插件的规范</a></li><li class="sidebar-sub-header"><a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html#插件的加载" class="sidebar-link">插件的加载</a></li><li class="sidebar-sub-header"><a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html#实操poem插件" class="sidebar-link">实操Poem插件</a></li><li class="sidebar-sub-header"><a href="/lin-cms-doc/0.2.x/plugins/flask/be_develop.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/lin-cms-doc/0.2.x/plugins/flask/list.html" class="sidebar-link">插件列表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="后端插件开发（目前处于测试状态）"><a href="#后端插件开发（目前处于测试状态）" class="header-anchor">#</a> <div style="display:inline-block;" data-v-2fb52f6a><img src="" alt data-v-2fb52f6a></div> 后端插件开发（目前处于测试状态）</h1> <h1 id="深入学习插件机制"><a href="#深入学习插件机制" class="header-anchor">#</a> 深入学习插件机制</h1> <blockquote><p>本小节让我们来详细介绍一下 Lin 的精髓——插件机制
我们在这里再次强调，诸如 Flask-JWT 这样的第三方库，Flask 官方把它称之为<code>扩展</code>（extension）
而在 Lin 中，我们的插件（plugin）某种程度上类似于扩展，但是它们完全不是一种东西！</p></blockquote> <h2 id="插件的规范"><a href="#插件的规范" class="header-anchor">#</a> 插件的规范</h2> <p>首先，我们通过<a href="/lin-cms-doc/0.2.x/plugins/flask/fe.html">插件使用</a>一章中的<code>古诗词</code>插件示例 来看看插件的目录规范和开发规范。</p> <h3 id="目录规范"><a href="#目录规范" class="header-anchor">#</a> 目录规范</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>├───poem
│   │   config.py  // 配置文件（必需），记录关于插件的可用配置
│   │   info.py    // 插件基本信息
│   │   README.md  // 插件文档
│   │   requirements.txt // 插件依赖包
│   │
│   └───app     // 应用开发目录
│           controller.py  // 控制层文件
│           forms.py       // 校验层文件
│           model.py       // 模型层文件
│           __init__.py    // 导出文件（必需）。重要！！！
</code></pre></div><p>Lin 的插件可能与你以前了解的插件概念不一样，<em>你可以把每个插件理解为一个小 app</em>。每个插件都有自己的配置、控制层、模型层甚至校验层（forms），换言之每个插件都有自己的业务，它的功能很像<strong>微服务</strong>，即每个插件只负责完成某一项功能。</p> <p>下面我们来介绍插件目录结构中的几个关键文件，你可以打开本地已经安装好的 <code>poem</code> 插件的源码，对照学习</p> <ul><li><p><strong>config.py</strong><br>
配置文件，其中的所有配置项会在我们执行 <code>python plugin_init.py</code> 初始化插件成功后，自动写入到项目配置文件 <code>setting.py</code> 中，你也可以根据自己的业务场景自由修改配置项，关于配置文件的更多话题，我们在下面会继续介绍。</p></li> <li><p>关于 <strong>info.py</strong><br>
插件基本信息，里面定义了三个变量<code>__name__</code>、<code>__version__</code>和<code>__author__</code>，分别表示插件名、插件版本号和插件开发者。在插件初始化时，插件初始化脚本会根据 <code>info.py</code> 中的信息来找到对应的插件。</p></li> <li><p>关于 <strong>requirements.txt</strong><br>
如果你是在插件中使用了一些第三方库，这些库在主应用中是没有的，那么请你将它添加到 <strong>requirements.txt</strong> 中。以方便我们运行初始化插件脚本的时候自动检测并安装这些依赖。<strong>注意，在你自己开发插件的时候，请一定不要将主应用中已经存在的第三方库添加到该文件中，否则可能造成插件与主应用的版本冲突，无法使用插件甚至主应用都会因此受损！</strong> 文件的格式如下</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>oss2==2.6.1
</code></pre></div><h3 id="开发规范"><a href="#开发规范" class="header-anchor">#</a> 开发规范</h3> <p>如果你想开发一个插件，你可以使用项目中的 <code>verdor/plugin_generator.py</code> 脚本来生成一个后端插件的基础模板。</p> <p>假设你想生成一个名为 <code>test</code> 的插件模板，请在项目的根目录下运行如下命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>python vendor/plugin_generator.py -n <span class="token builtin class-name">test</span>
</code></pre></div><p>由于插件本身就是一个微型的 app，插件的开发规范与项目的开发规范几乎一致，如果你还不够熟悉，那么请你再次阅读<a href="/lin-cms-doc/0.2.x/plugins/server/">开发规范</a>。</p> <p>当然，插件这里也有一个自己独特的机制——加载。在前面，我们在介绍项目开发时，红图以及模型都是我们主动去通过<code>import</code>导入的。但是在插件中，我们可以不用做这件事情，因为 Lin 会自动通过 loader（加载器）来帮我们做这件事，loader 可以帮我们自动去加载插件中的红图 api 和数据模型类。</p> <p>但是，在你开发的插件中，你必须明确告诉 loader，因为 loader 真的不够聪明，它到底该加载哪些东西。而<code>poem/app/__init__.py</code>这个文件则扮演这个角色，它里面的代码很简单，如下：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> <span class="token punctuation">.</span>controller <span class="token keyword">import</span> api
<span class="token keyword">from</span> <span class="token punctuation">.</span>model <span class="token keyword">import</span> Poem

<span class="token keyword">def</span> <span class="token function">initial_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>在代码的第一行，我们从当前目录中的<code>controller</code>导入了<code>api</code>这个红图，第二行从<code>model</code>中导入了<code>Poem</code>这个模型类。而后，loader 会自动的从<code>__init__.py</code>文件得到刚才导出的<code>api</code>和<code>Poem</code>，然后存储到自身的容器中。</p> <p>当然，在<code>__init__.py</code>你可以导入多个的红图和模型，如你还可能需要加载另外一个红图<code>some_api</code>和另外一个模型<code>Some</code>，接下来你应该在上段的代码中加入：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> <span class="token punctuation">.</span>some <span class="token keyword">import</span> some_api
<span class="token keyword">from</span> <span class="token punctuation">.</span>model <span class="token keyword">import</span> Some
</code></pre></div><p>被 loader 加载红图会被直接挂载到默认的 plugin 蓝图中，你可通过相应的 url 直接访问。而加载的模型你可通过如下的方式得到：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> lin<span class="token punctuation">.</span>core <span class="token keyword">import</span> manager <span class="token comment"># 得到manager</span>
Image <span class="token operator">=</span> manager<span class="token punctuation">.</span>get_model<span class="token punctuation">(</span><span class="token string">'Poem'</span><span class="token punctuation">)</span> <span class="token comment"># 得到加载到容器中的Log模型</span>
</code></pre></div><p>当然如果你不喜欢这种方式，你也可以通过<code>import</code>方式得到这个模型：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> lin<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>poem<span class="token punctuation">.</span>app<span class="token punctuation">.</span>model <span class="token keyword">import</span> Poem
</code></pre></div><p>除了导出插件中的红图 api 和数据模型类的功能，<code>__init__.py</code>中还可以定义一个名称为<code>initial_data</code>的函数，当插件初始化时，我们有时候需要向数据库添加一些初始数据，其业务逻辑可以封装在这个函数中。</p> <p><code>initial_data</code>函数的编写方法非常简单，你可以查看<code>poem/app/__init__.py</code>的源码来学习如何向数据添加初始数据。当然，如果你自己编写的插件不需要初始数据，可以不定义这个函数。但注意，<code>__init__.py</code>文件中只处理上述的两种业务，<em>请不要在该文件下编写任何其他的业务逻辑</em>。</p> <h2 id="插件的加载"><a href="#插件的加载" class="header-anchor">#</a> 插件的加载</h2> <p>在<a href="/lin-cms-doc/0.2.x/plugins/server/run_process.html">运行流程</a>一节中我们留下了一个悬念，那就是插件的加载流程。在 Lin 源代码中，可以在 Manager 的构造函数中找到如下代码段：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span>loader <span class="token keyword">import</span> Loader
self<span class="token punctuation">.</span>loader<span class="token punctuation">:</span> Loader <span class="token operator">=</span> Loader<span class="token punctuation">(</span>plugin_path<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>这里初始化的 loader （插件加载器），由它来负责所有插件的加载，我们继续打开 Loader 的构造函数。</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> plugin_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">assert</span> <span class="token builtin">type</span><span class="token punctuation">(</span>plugin_path<span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token string">'plugin_path must be a dict'</span>
    self<span class="token punctuation">.</span>plugin_path <span class="token operator">=</span> plugin_path
    self<span class="token punctuation">.</span>load_plugins_config<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 加载插件配置</span>
    self<span class="token punctuation">.</span>load_plugins<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 加载插件</span>
</code></pre></div><p>这里大致的流程是这样的，loader 率先从主 app 中读取插件的路径和配置（setting.py 文件中），然后加载每个插件单独的配置，最后加载插件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">|</span>--------------<span class="token operator">|</span>           <span class="token operator">|</span>-------------------<span class="token operator">|</span>              <span class="token operator">|</span>----------<span class="token operator">|</span>
<span class="token operator">|</span> 加载插件配置   <span class="token operator">|</span>   ----<span class="token operator">&gt;</span>   <span class="token operator">|</span>  加载插件各自配置    <span class="token operator">|</span>     ----<span class="token operator">&gt;</span>    <span class="token operator">|</span> 加载插件  <span class="token operator">|</span>
<span class="token operator">|</span>--------------<span class="token operator">|</span>           <span class="token operator">|</span>-------------------<span class="token operator">|</span>              <span class="token operator">|</span>----------<span class="token operator">|</span>
</code></pre></div><p>接下来我们继续，在 Loader 类中还有两个方法<code>_load_plugin</code>和<code>_load_config</code>，这两个方法是 loader 的核心方法，由它们向容器中加载插件和插件配置。这两个方法的思路很明确，我们相信你完全可以自己理解。</p> <p>好，插件的整体流程的梳理到此已经结束了。如果你感到疑惑，请记住 loader 的加载本身只是一个很简单的过程，当你亲身通过断点 Debug 的方式去运行程序时，你就会觉得豁然开朗。</p> <h2 id="实操poem插件"><a href="#实操poem插件" class="header-anchor">#</a> 实操Poem插件</h2> <blockquote><p>在大家已经了解了插件机制和插件的使用方法后，下面我们来手把手带着大家来实操的古诗词插件，你将学到一个插件的整个开发流程和注意事项。好了，话不多说，我们开始吧！</p></blockquote> <h3 id="主配置文件解析"><a href="#主配置文件解析" class="header-anchor">#</a> 主配置文件解析</h3> <p>打开<code>app/config/setting.py</code>文件，如果该文件中已经存在了如下配置：</p> <div class="language-py extra-class"><pre class="language-py"><code>PLUGIN_PATH <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'poem'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'path'</span><span class="token punctuation">:</span> <span class="token string">'app.plugins.poem'</span><span class="token punctuation">,</span> <span class="token string">'enable'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token string">'limit'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>证明你已经下载插件源码并且在项目中进行了插件的初始化，上述配置会被自动写入。如果你想了解插件初始化脚本的执行流程，请查看<code>vendor/plugin_init.py</code>的文档注释。</p> <p>如果你是自己开发插件，为了让插件的路由成功注册，以方便在开发中调试插件的api，你可以先手动将插件的配置写入到<code>setting.py</code>文件中。</p> <p>下面我们解释这个配置项：</p> <ul><li>PLUGIN_PATH：每个插件的单独配置。
如<code>poem</code>代表当前的插件的名字为<strong>poem</strong>，<code>path</code>表示插件的路径，如 poem 插件的路径在<code>app/plugins/poem</code>下，<code>enable: True</code>表示开启当前插件。其他更多的配置项如 <code>limit</code> 是插件中使用到的配置。</li></ul> <h3 id="调用获取古诗词接口"><a href="#调用获取古诗词接口" class="header-anchor">#</a> 调用获取古诗词接口</h3> <p>我们运行<code>starter.py</code>文件，然后请打开 postman 测试工具，选择 get 方法，请求 url 为<code>http://localhost:5000/plugin/poem/all</code>。</p> <p>你可能会有所疑惑？这个 url 是如何确定的，插件中的路由 url 满足下述规范。</p> <ul><li>所有插件的路由都会被挂载到 plugin 的蓝图中，该蓝图的路径前缀为<code>/plugin</code>。</li> <li>每个单独的插件都会有一个名字，如 poem 插件的名称为<code>poem</code>，若在该插件下，存在多个红图实例（redprint）,则其所有路由都会有一个二级前缀<code>/poem</code>。若该插件下只存在一个红图实例，即一个 controller，则不会有二级前缀，你的路径只有一个一级前缀，即<code>/plugin</code>。</li> <li>后面的路径就被每个插件下的红图所确定，如 poem 插件下有个名为<code>poem</code>红图实例，该红图下有<code>get_list</code>这个视图函数。此时该插件只有一个红图实例，故它的前缀只有一级，所以获取古诗词接口的 url 为<code>/plugin/poem/all</code>。如果 all 插件下有多个红图实例，且某个红图名为<code>some</code>，some 下有<code>test</code>的视图函数，则访问这个视图函数的 url 为<code>/plugin/poem/some/test</code>。</li></ul> <p>点击<code>Send</code>，如果一些顺利你会看到如下返回结果：</p> <div class="imgWrapper" data-v-347678d1><img src="http://imglf4.nosdn0.126.net/img/L1FxUmNhYXM3L2RnZnhXR0grZFJTZlg3RFJkRnU1UitnT3ppYmZNWlpnblFzYXI0ZktGY3dRPT0.png?imageView&amp;thumbnail=1680x0&amp;quality=96&amp;stripmeta=0" data-v-347678d1></div> <h3 id="插件局部配置文件"><a href="#插件局部配置文件" class="header-anchor">#</a> 插件局部配置文件</h3> <p>在<code>poem</code>的模型层<code>poem/app/model.py</code>代码中，你或许已经发现，我们从lin的核心库中导入了<code>lin_config</code>，并且使用<code>lin_config.get_config('poem.limit')</code>获取到了配置，那么配置文件定义在哪里呢？
我们打开<code>poem/config.py</code>配置文件，可以发现，Lin建议用户定义的配置项是小写的。如果你开发的插件有更多的配置，都可以在这个文件中添加。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># app/plugins/poem/config.py</span>
limit <span class="token operator">=</span> <span class="token number">20</span>
</code></pre></div><p>此处设置了limit为20，由于我们在 <code>setting.py</code> 中也有<strong>limit</strong>的相关配置，<code>lin_config</code>会优先调用setting.py中的配置。修改<code>setting.py</code>中的 limit 为5，再次调用接口，可发现接口返回了5条古诗词的记录。</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>在本小节，我们通过 poem 这个插件示例，学习了插件的开发规范和加载流程，请在<code>controller.py</code>文件中查看相应的 api。</p> <p>我们还通过修改配置来限制获取古诗词的数量，请注意配置很重要，真的很重要，它给了插件很大的灵活性。</p> <p>但是，在此你可能会疑惑，插件的配置与 Flask 的配置有何区别？为何我们还需要一个插件的配置，而不是直接从 Flask 中读取。</p> <p>原因有如下几点:</p> <ul><li><p>Flask 的配置依赖 Flask 的上下文。在 Flask 中读取配置，你必须在 Flask 的上下文中才能读取到相应的配置，而我们的插件是通过路径加载的，它的加载先于 Flask 的上下文创建，因此很多配置只能在视图函数中使用，这不够灵活。</p></li> <li><p>插件的配置既可以在 config.py 中配置，也可以在 setting.py 中更改，Flask 本身的配置机制不能够满足如此需求。</p></li> <li><p>再者，Flask 的配置有明确的要求，所有字母均要求大写，但很多时候如<code>poem</code>名称，我们还是觉得小写比较直观，而且我们必须让取配置更加方便，如<code>lin_config.get_config('poem.limit')</code>可直接取到 poem 下的 limit 配置。很多时候插件的配置是层叠的，我们支持二级直接取配置。</p></li></ul> <p>插件的实战到这里就结束了，你可能觉得会有些短，有些少。但是这确实是真实的情况，因为插件本身就很简单，你完全可以把它理解为一个<strong>微 app</strong>。按照我们之前的开发规范来开发插件即可。
<div data-v-244f5c7a><ul class="rightMenuWrapper" data-v-244f5c7a></ul></div></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/TaleLin/lin-cms-doc/edit/master/docs/0.2.x/plugins/flask/be_develop.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/31/2021, 3:31:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lin-cms-doc/0.2.x/plugins/flask/fe_develop.html" class="prev">
        前端插件开发
      </a></span> <span class="next"><a href="/lin-cms-doc/0.2.x/plugins/flask/list.html">
        插件列表
      </a>
      →
    </span></p></div> <img src="/lin-cms-doc/assets/img/bottom-logo.385a53c5.png" style="position:absolute;width:135px;left:calc(100% / 2 + 50px);transform:translateX(-50%);"></main></div><div class="global-ui"></div></div>
    <script src="/lin-cms-doc/assets/js/app.0c2f698b.js" defer></script><script src="/lin-cms-doc/assets/js/11.98c62765.js" defer></script><script src="/lin-cms-doc/assets/js/2.ae8ff45b.js" defer></script><script src="/lin-cms-doc/assets/js/44.0eeb345a.js" defer></script><script src="/lin-cms-doc/assets/js/5.98054b77.js" defer></script><script src="/lin-cms-doc/assets/js/7.e3bf37d0.js" defer></script><script src="/lin-cms-doc/assets/js/6.1e097248.js" defer></script>
  </body>
</html>
